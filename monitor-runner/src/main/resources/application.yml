spring:
  application:
    name: monitor-runner
  
  rabbitmq:
    host: localhost
    port: 5672
    username: monitor
    password: monitor123
    listener:
      simple:
        acknowledge-mode: auto
        concurrency: 3
        max-concurrency: 5
        prefetch: 1

server:
  port: 8081

# Actuator Configuration
management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics,prometheus
      base-path: /actuator
  endpoint:
    health:
      show-details: always
      probes:
        enabled: true
  health:
    livenessstate:
      enabled: true
    readinessstate:
      enabled: true

# Resilience4j Retry
resilience4j:
  retry:
    instances:
      playwright:
        max-attempts: 3
        wait-duration: 2s
        enable-exponential-backoff: true
        exponential-backoff-multiplier: 2
        retry-exceptions:
          - java.net.SocketTimeoutException
          - java.net.ConnectException
          - com.microsoft.playwright.TimeoutError
        ignore-exceptions:
          - java.lang.IllegalArgumentException

# Monitor API client
monitor:
  api:
    base-url: http://localhost:8080
    connect-timeout: 10000
    read-timeout: 30000

# Playwright settings
playwright:
  browser: firefox  # firefox, chromium, or webkit (firefox is more stable on ARM64 macOS)
  headless: true
  timeout-ms: 30000
  slow-mo-ms: 0
  viewport-width: 1920
  viewport-height: 1080
  user-agent: "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 MonitorBot/1.0"

# Execution settings
execution:
  max-concurrent: 3
  page-timeout-ms: 60000
  navigation-timeout-ms: 30000
